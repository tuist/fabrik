# Cross.toml - Configuration for cross-compilation

# Install protobuf compiler in all cross Docker images
[build.env]
passthrough = ["PROTOC"]

# Pre-build script to install protoc in cross Docker images
[target.x86_64-unknown-linux-gnu]
pre-build = [
    "apt-get update",
    "apt-get install -y protobuf-compiler",
]

[target.x86_64-unknown-linux-musl]
pre-build = [
    "apt-get update",
    "apt-get install -y protobuf-compiler",
]

[target.aarch64-unknown-linux-gnu]
pre-build = [
    "dpkg --add-architecture arm64",
    "apt-get update",
    "apt-get install -y protobuf-compiler",
]

[target.aarch64-unknown-linux-musl]
pre-build = [
    "apt-get update",
    "apt-get install -y protobuf-compiler",
]

[target.armv7-unknown-linux-gnueabihf]
pre-build = [
    "dpkg --add-architecture armhf",
    "apt-get update",
    "apt-get install -y protobuf-compiler",
]

[target.armv7-unknown-linux-musleabihf]
pre-build = [
    "apt-get update",
    "apt-get install -y protobuf-compiler",
]
